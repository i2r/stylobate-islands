$skin-islands-arrow-height ?= 4.2*rem
$skin-islands-arrow-color  ?= #FFDB4C

skin-islands-arrow()
  $height = alike(arguments, $skin-islands-arrow-height)
  $color = alike(arguments, $skin-islands-arrow-color)

  white-space: nowrap

  background: $color

  margin-right: round(($height / 2) * tan(30deg), 3)

  stylobate_defaults(arguments,
    _theme _service)

  unless ie
    stylobate_defaults(arguments,
      __helper '&:before')

  // deprecating things
  if get(arguments, -helper) in arguments
    error("islands-arrow at `" + selector() + "`: Replace `-helper` element with a call of `__helper` element")

  if tail in arguments
    error("islands-arrow at `" + selector() + "`: Replace `tail` param with a call of `__helper` element")

  if no-elements in arguments
    error("islands-arrow at `" + selector() + "`: Replace `no-elements` param with empty elements like `(__helper '')`")

  if search in arguments
    error("islands-arrow at `" + selector() + "`: Replace `search` param with `(_theme _search)` modifier")

skin-islands-arrow_theme()
  if _search in arguments
    padding: ($islands_xs - 0.1*rem) ($islands_m - 0.2*rem) ($islands_xs - 0.1*rem) ($islands_xs - 0.1*rem)
    font-size: 1em
    line-height: 1

  if _service in arguments
    $height = alike(arguments, parent_alike(arguments, $skin-islands-arrow-height))

    padding: ($islands_xs + 0.2*rem) ($islands_m - 0.1*rem)
    font-size: 1.8*rem
    line-height: $height - (2*$islands_xs + 0.4*rem)

skin-islands-arrow__helper()
  pseudo-with-content()

  @extends $skin-islands-arrow__helper

  $height = alike(arguments, parent_alike(arguments, $skin-islands-arrow-height))
  $color = alike(arguments, parent_alike(arguments, $skin-islands-arrow-color))

  if ie
    border-color: transparent $color
    border-width: ($height / 2) 0 ($height / 2) (round(($height / 2) * tan(30deg), 3))
  else
    width: round($height * (1 / math(2, 'sqrt')), 4)
    height: round($height * (1 / math(2, 'sqrt')), 4)

    background: linear-gradient(45deg, $color 50%,transparent 50%)

    if alpha($color) == 1
      -webkit-transform: translate(-50%,-50%) scale(0.5,1) rotate(-135deg) translateZ(0)

$skin-islands-arrow__helper
  position: absolute
  left: 100%

  if ie
    top: 0
    height: 0

    border-style: dashed solid
  else
    top: 50%

    transform: translate(-50%,-50%) scale(0.5,1) rotate(-135deg)

